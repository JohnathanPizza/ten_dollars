; receive next message if any in vr10
; sender proc id in vr11/1
; sender is 0xff if no message received
; else got a message

>BRK_RECEIVE
	LDX.I	0
>_BRK_RECEIVE_LOOP
	LDA.X	IPC_TARGET
	CMP	PROC_ACTIVE_ID
	BEQ	_BRK_RECEIVE_FOUND
	INX
	CPX.I	PROC_COUNT
	BNE	_BRK_RECEIVE_LOOP
	LDA.I	0XFF
	STA.Z	VR11
	JMP	PROC_UNPAUSE
>_BRK_RECEIVE_FOUND
	LDA.I	0XFF
	STA.X	IPC_TARGET
	STX.Z	VR11
	TXA
	ASL
	TAX
	LDA.X	IPC_DATA
	STA.Z	VR10
	LDA.X	IPC_DATA 1
	STA.Z	VR10 1
	JMP	PROC_UNPAUSE
