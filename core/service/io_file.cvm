; tries to claim file privilege for the current process after previous failure 

>SERVICE_IO_FILE
	LDA	IO_FILE_CLAIM		; load claim value
	CMP.I	0XFF			; test if not occupied
	BNE	_SERVICE_IO_FILE_FAIL	; fail if occupied
	LDA	PROC_ACTIVE_ID		; load proc id
	STA	IO_FILE_CLAIM		; store proc id in claim value
	TAY				; move proc id to Y
	LDA.I	PROC_STATE_READY	; load ready state
	STA.Y	PROC_STATE		; update proc state
>_SERVICE_IO_FILE_FAIL
	JMP	SERVICE_CYCLE_BEGIN	; start new cycle
